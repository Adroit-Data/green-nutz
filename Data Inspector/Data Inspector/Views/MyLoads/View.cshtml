@model  System.Data.DataTable

@using System.Data;

@{
    ViewBag.Title = "View";

}

<h2>View</h2>

<table class="table table-hover">
    <thead>
        <tr>
            @foreach (DataColumn col in Model.Columns)
            {


                if (col.ColumnName != "DIRowID")
                {
                    <th>@col.ColumnName</th>
                }
                else
                {
                    <th>Edit</th>
                }
            }
        </tr>



    </thead>
    <tbody>
        @foreach (DataRow row in Model.Rows)
        {

            <tr>



                @foreach (DataColumn col in Model.Columns)
                {

                    if (col.ColumnName == "DIRowID")
                    {
                        <td>@Html.ActionLink("Edit", "Edit", new { TableName = @Model.TableName, RowId = @row[col.ColumnName].ToString()}) </td>

                    }
                    else
                    {
                        <td>@row[col.ColumnName]</td>
                    }
                }

            </tr>


        }
</tbody>
   
</table>


@section scripts{
    <script src="~/Scripts/tableloaddata.js"></script>
    <script>
        var tableid = window.location.href.substr(window.location.href.lastIndexOf('/') + 1);
        TableLoadApp.value("tableid", tableid);
    </script>
}

<h2>View</h2>

<div ng-app="TableLoadApp" class="container">
    <input type="text" placeholder="Search Data" ng-model="searchData" />
    <br />
    <div ng-controller="TableLoadController">
        <table class="table table-striped table-condensed table-hover">
            <tr>
                @foreach (DataColumn col in Model.Columns)
                {                
                    if (col.ColumnName != "DIRowID")
                    {
                        <th>@col.ColumnName&nbsp;<a ng-click="sort_by('TestField1')"><i class="fas fa-sort"></i></a></th>
                    }
                }
            </tr>
            <tr ng-repeat="r in tableload.data | filter : searchData">
                    @foreach (DataColumn col in Model.Columns)
                    {
                        if (col.ColumnName != "DIRowID")
                        {
                            string jsCol = "{{r." + col.ColumnName + "}}";
                            <td>@jsCol</td>
                        }

                    }                         
            </tr>
        </table>
    </div>
</div>





